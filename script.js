const MASTER_IPA = {
    "big":"/bɪɡ/", "still":"/stɪl/", "list":"/lɪst/", "film":"/fɪlm/", "win":"/wɪn/", "trip":"/trɪp/", "pick":"/pɪk/", "six":"/sɪks/", "give":"/ɡɪv/", "quick":"/kwɪk/", "kid":"/kɪd/", "skin":"/skɪn/", "hill":"/hɪl/", "miss":"/mɪs/", "hit":"/hɪt/", "bit":"/bɪt/", "risk":"/rɪsk/", "tip":"/tɪp/", "bill":"/bɪl/", "mix":"/mɪks/", "sick":"/sɪk/", "split":"/splɪt/", "twin":"/twɪn/", "fit":"/fɪt/", "sit":"/sɪt/", "hip":"/hɪp/", "tin":"/tɪn/", "kill":"/kɪl/", "stick":"/stɪk/", "lift":"/lɪft/", "man":"/mæn/", "back":"/bæk/", "tax":"/tæks/", "plan":"/plæn/", "mass":"/mæs/", "track":"/træk/", "tag":"/tæɡ/", "add":"/æd/", "van":"/væn/", "fact":"/fækt/", "brand":"/brænd/", "fat":"/fæt/", "stand":"/stænd/", "act":"/ækt/", "vat":"/væt/", "pack":"/pæk/", "tab":"/tæb/", "black":"/blæk/", "rant":"/rænt/", "snack":"/snæk/", "fan":"/fæn/", "wrap":"/ræp/", "gas":"/ɡæs/", "lab":"/læb/", "ban":"/bæn/", "lack":"/læk/", "cat":"/kæt/", "flat":"/flæt/", "hand":"/hænd/", "snap":"/snæp/", "tap":"/tæp/", "mat":"/mæt/", "trim":"/trɪm/", "strand":"/strænd/", "tick":"/tɪk/", "rack":"/ræk/", "lip":"/lɪp/", "drag":"/dræɡ/", "pin":"/pɪn/", "rim":"/rɪm/", "lap":"/læp/", "grin":"/ɡrɪn/", "lad":"/læd/", "wig":"/wɪɡ/", "scrap":"/skræp/", "grill":"/ɡrɪl/", "bat":"/bæt/", "wit":"/wɪt/", "span":"/spæn/", "lid":"/lɪd/", "valve":"/vælv/", "stiff":"/stɪf/", "skim":"/skɪm/", "wax":"/wæks/", "wrist":"/rɪst/", "grip":"/ɡrɪp/", "trap":"/træp/", "pill":"/pɪl/", "knit":"/nɪt/", "tram":"/træm/", "best":"/best/", "next":"/nekst/", "web":"/web/", "help":"/help/", "set":"/set/", "well":"/wel/", "press":"/pres/", "red":"/red/", "let":"/let/", "end":"/end/", "bread":"/bred/", "rent":"/rent/", "text":"/tekst/", "pet":"/pet/", "head":"/hed/", "den":"/den/", "rest":"/rest/", "friend":"/frend/", "step":"/step/", "dress":"/dres/", "bed":"/bed/", "bell":"/bel/", "neck":"/nek/", "desk":"/desk/", "spread":"/spred/", "pen":"/pen/", "wet":"/wet/", "mess":"/mes/", "hell":"/hel/", "ten":"/ten/", "top":"/tɒp/", "want":"/wɒnt/", "stop":"/stɒp/", "log":"/lɒɡ/", "stock":"/stɒk/", "cost":"/kɒst/", "rock":"/rɒk/", "hot":"/hɒt/", "golf":"/ɡɒlf/", "box":"/bɒks/", "loss":"/lɒs/", "bomb":"/bɒm/", "spot":"/spɒt/", "god":"/ɡɒd/", "boss":"/bɒs/", "block":"/blɒk/", "crop":"/krɒp/", "plot":"/plɒt/", "dog":"/dɒɡ/", "swan":"/swɒn/", "rob":"/rɒb/", "squad":"/skwɒd/", "bond":"/bɒnd/", "fox":"/fɒks/", "cross":"/krɒs/", "drop":"/drɒp/", "lock":"/lɒk/", "pot":"/pɒt/", "what":"/wɒt/", "up":"/ʌp/", "run":"/rʌn/", "love":"/lʌv/", "son":"/sʌn/", "plus":"/plʌs/", "front":"/frʌnt/", "club":"/klʌb/", "trust":"/trʌst/", "rough":"/rʌf/", "stuff":"/stʌf/", "hub":"/hʌb/", "drug":"/drʌɡ/", "pub":"/pʌb/", "cut":"/kʌt/", "hull":"/hʌl/", "tough":"/tʌf/", "cup":"/kʌp/", "hunt":"/hʌnt/", "plug":"/plʌɡ/", "blood":"/blʌd/", "bus":"/bʌs/", "bump":"/bʌmp/", "fund":"/fʌnd/", "truck":"/trʌk/", "bulk":"/bʌlk/", "gun":"/ɡʌn/", "ton":"/tʌn/", "sum":"/sʌm/", "tub":"/tʌb/", "puff":"/pʌf/", "look":"/lʊk/", "put":"/pʊt/", "good":"/ɡʊd/", "book":"/bʊk/", "full":"/fʊl/", "woof":"/wʊf/", "hook":"/hʊk/", "nook":"/nʊk/", "wood":"/wʊd/", "pull":"/pʊl/", "took":"/tʊk/", "wolf":"/wʊlf/", "stood":"/stʊd/", "cook":"/kʊk/", "foot":"/fʊt/", "crook":"/krʊk/", "hood":"/hʊd/", "rook":"/rʊk/", "brook":"/brʊk/", "bull":"/bʊl/", "wool":"/wʊl/",
    "quit":"/kwɪt/", "ram":"/ræm/", "egg":"/eɡ/", "trick":"/trɪk/", "buzz":"/bʌz/", "scant":"/skænt/", "swap":"/swɒp/", "cliff":"/klɪf/", "flood":"/flʌd/", "quest":"/kwest/", "skull":"/skʌl/", "guess":"/ɡes/", "squid":"/skwɪd/", "helm":"/helm/", "rub":"/rʌb/", "scab":"/skæb/", "smog":"/smɒɡ/", "peg":"/peɡ/", "snug":"/snʌɡ/", "quilt":"/kwɪlt/", "crack":"/kræk/", "knot":"/nɒt/", "kick":"/kɪk/", "strut":"/strʌt/", "floss":"/flɒs/", "scrum":"/skrʌm/", "sweat":"/swet/", "cough":"/kɒf/", "slam":"/slæm/", "duck":"/dʌk/", "sieve":"/sɪv/", "blob":"/blɒb/", "twist":"/twɪst/", "gulf":"/ɡʌlf/", "spell":"/spel/", "doll":"/dɒl/", "clump":"/klʌmp/", "plait":"/plæt/", "scan":"/skæn/", "fix":"/fɪks/", "twelve":"/twelv/", "blonde":"/blɒnd/", "hymn":"/hɪm/", "drum":"/drʌm/", "knack":"/næk/", "sculpt":"/skʌlpt/", "whelk":"/welk/", "bronze":"/brɒnz/", "frizz":"/frɪz/", "gut":"/ɡʌt/", "gram":"/ɡræm/", "quell":"/kwel/", "frost":"/frɒst/", "swab":"/swob/", "hem":"/hem/", "stud":"/stʌd/", "breast":"/brest/", "smock":"/smɒk/", "build":"/bɪld/", "pat":"/pæt/", "milk":"/mɪlk/", "realm":"/relm/", "blitz":"/blɪts/", "sulk":"/sʌlk/", "sob":"/sɒb/", "ant":"/ænt/", "fib":"/fɪb/", "crumb":"/krʌm/", "stress":"/stres/", "sock":"/sɒk/", "spill":"/spɪl/", "smell":"/smel/", "pulse":"/pʌls/", "frock":"/frɒk/", "flex":"/fleks/", "clan":"/klæn/", "lapse":"/læps/", "frog":"/frɒɡ/", "mud":"/mʌd/", "swim":"/swɪm/", "hump":"/hʌmp/", "scamp":"/skæmp/", "clock":"/klɒk/", "pond":"/pɒnd/", "cull":"/kʌl/", "lamb":"/læm/", "mock":"/mɒk/", "zip":"/zɪp/", "swift":"/swɪft/", "stamp":"/stæmp/", "pant":"/pænt/", "mob":"/mɒb/", "kiss":"/kɪs/", "weld":"/weld/", "quip":"/kwɪp/", "script":"/skrɪpt/", "dud":"/dʌd/", "sand":"/sænd/", "silk":"/sɪlk/", "slop":"/slɒp/", "slab":"/slæb/", "sprint":"/sprɪnt/", "plump":"/plʌmp/", "crust":"/krʌst/", "whip":"/wɪp/", "bog":"/bɒɡ/", "disc":"/dɪsk/", "rot":"/rɒt/", "mill":"/mɪl/", "gland":"/ɡlænd/",
    "nest":"/nest/", "wag":"/wæɡ/", "vet":"/vet/", "lick":"/lɪk/", "bent":"/bent/", "limb":"/lɪm/", "melt":"/melt/", "flint":"/flɪnt/", "axe":"/æks/", "pest":"/pest/", "drift":"/drɪft/", "rag":"/ræɡ/", "drip":"/drɪp/", "pram":"/præm/", "sift":"/sɪft/", "vent":"/vent/", "fig":"/fɪɡ/", "tract":"/trækt/", "skid":"/skɪd/", "tread":"/tred/", "din":"/dɪn/", "nip":"/nɪp/", "sap":"/sæp/", "deck":"/dek/", "gift":"/ɡɪft/", "dam":"/dæm/", "frisk":"/frɪsk/", "crest":"/krest/", "glint":"/ɡlɪnt/", "ramp":"/ræmp/", "kilt":"/kɪlt/", "plaid":"/plæd/", "lilt":"/lɪlt/", "nick":"/nɪk/", "glen":"/ɡlen/", "kit":"/kɪt/", "damp":"/dæmp/", "lag":"/læɡ/", "sniff":"/snɪf/", "crab":"/kræb/", "quill":"/kwɪl/", "keg":"/keɡ/", "sag":"/sæɡ/", "twig":"/twɪɡ/", "silt":"/sɪlt/", "flock":"/flɒk/", "crib":"/krɪb/", "pact":"/pækt/", "sect":"/sekt/", "cleanse":"/klenz/", "smack":"/smæk/", "mop":"/mɒp/", "knock":"/nɒk/", "limp":"/lɪmp/", "fad":"/fæd/", "whim":"/wɪm/", "mend":"/mend/", "fizz":"/fɪz/", "amp":"/æmp/", "bib":"/bɪb/", "wand":"/wɒnd/", "squint":"/skwɪnt/", "slack":"/slæk/", "scalp":"/skælp/", "fog":"/fɒɡ/", "wren":"/ren/", "cod":"/kɒd/", "bless":"/bles/", "bid":"/bɪd/", "clamp":"/klæmp/", "guild":"/ɡɪld/", "zap":"/zæp/", "splint":"/splɪnt/", "frill":"/frɪl/", "elm":"/elm/", "dock":"/dɒk/", "wasp":"/wɒsp/", "cog":"/kɒɡ/", "whisk":"/wɪsk/", "bend":"/bend/", "dull":"/dʌl/", "hum":"/hʌm/", "quack":"/kwæk/", "crypt":"/krɪpt/", "lust":"/lʌst/", "gloss":"/ɡlɒs/", "tusk":"/tʌsk/", "swamp":"/swɒmp/", "squat":"/skwɒt/", "scrub":"/skrʌb/", "scuff":"/skʌf/", "snag":"/snæɡ/", "none":"/nʌn/", "swill":"/swɪl/", "cuff":"/kʌf/", "glove":"/ɡlʌv/", "cot":"/kɒt/", "cyst":"/sɪst/", "muck":"/mʌk/", "swat":"/swɒt/", "bulb":"/bʌlb/", "whack":"/wæk/", "tug":"/tʌɡ/", "fob":"/fɒb/", "bud":"/bʌd/", "stomp":"/stɒmp/", "buck":"/bʌk/", "dread":"/dred/", "blimp":"/blɪmp/", "trot":"/trɒt/", "wok":"/wɒk/", "wad":"/wɒd/", "beg":"/beɡ/", "hob":"/hɒb/",
    "gallon":"/ˈɡæl.ən/", "above":"/əˈbʌv/", "panda":"/ˈpæn.də/", "villain":"/ˈvɪl.ən/", "collapse":"/kəˈlæps/", "syrup":"/ˈsɪr.əp/", "lemon":"/ˈlem.ən/", "protect":"/prəˈtekt/", "extra":"/ˈek.strə/", "canal":"/kəˈnæl/", "arrest":"/əˈrest/", "tenant":"/ˈten.ənt/", "parrot":"/ˈpær.ət/", "alpha":"/ˈæl.fə/", "campus":"/ˈkæm.pəs/", "welcome":"/ˈwel.kəm/", "lapel":"/ləˈpel/", "cactus":"/ˈkæk.təs/", "collect":"/kəˈlekt/", "bullock":"/ˈbʊl.ək/", "stomach":"/ˈstʌm.ək/", "buttock":"/ˈbʌt.ək/", "correct":"/kəˈrekt/", "woollen":"/ˈwʊl.ən/", "villa":"/ˈvɪl.ə/", "husband":"/ˈhʌz.bənd/", "assess":"/əˈses/", "heron":"/ˈher.ən/", "breakfast":"/ˈbrek.fəst/", "atlas":"/ˈæt.ləs/", "Christmas":"/ˈkrɪs.məs/", "maggot":"/ˈmæɡ.ət/", "atom":"/ˈæt.əm/", "cadet":"/kəˈdet/", "felon":"/ˈfel.ən/", "zebra":"/ˈzeb.rə/", "possess":"/pəˈzes/", "melon":"/ˈmel.ən/", "hammock":"/ˈhæm.ək/", "adopt":"/əˈdɒpt/", "comma":"/ˈkɒm.ə/", "gazette":"/ɡəˈzet/", "gammon":"/ˈɡæm.ən/", "dragon":"/ˈdræɡ.ən/", "column":"/ˈkɒl.əm/", "salad":"/ˈsæl.əd/", "gallop":"/ˈɡæl.əp/", "stigma":"/ˈstɪɡ.mə/", "ballad":"/ˈbæl.əd/", "attract":"/əˈtrækt/", "doctor":"/ˈdɒk.tə/", "lizard":"/ˈlɪz.əd/", "terror":"/ˈter.ə/", "copper":"/ˈkɒp.ə/", "butter":"/ˈbʌt.ə/", "monarch":"/ˈmɒn.ək/", "forgive":"/fəˈɡɪv/", "cover":"/ˈkʌv.ə/", "hover":"/ˈhɒv.ə/", "blizzard":"/ˈblɪz.əd/", "figure":"/ˈfɪɡ.ə/", "liquor":"/ˈlɪk.ə/", "ponder":"/ˈpɒn.də/", "forget":"/fəˈɡet/", "rigour":"/ˈrɪɡ.ə/", "grammar":"/ˈɡræm.ə/", "actor":"/ˈæk.tə/", "suffer":"/ˈsʌf.ə/", "concert":"/ˈkɒn.sət/", "offer":"/ˈɒf.ə/", "persist":"/pəˈsɪst/", "whisper":"/ˈwɪs.pə/", "sponsor":"/ˈsɒn.sə/", "vulgar":"/ˈvʌl.ɡə/", "sulphur":"/ˈsʌl.fə/", "otter":"/ˈɒt.ə/", "centre":"/ˈsen.tə/", "honour":"/ˈɒn.ə/", "enter":"/ˈen.tə/", "standard":"/ˈstæn.dəd/", "plumber":"/ˈplʌm.ə/", "collar":"/ˈkɒl.ə/", "leopard":"/ˈlep.əd/", "mirror":"/ˈmɪr.ə/", "glamour":"/ˈɡlæm.ə/", "custard":"/ˈkʌs.təd/", "timber":"/ˈtɪm.ə/", "cupboard":"/ˈkʌb.əd/", "effort":"/ˈef.ət/", "differ":"/ˈdɪf.ə/", "wilderness":"/ˈwɪl.də.nəs/", "professor":"/prəˈfes.ə/", "asparagus":"/əˈspær.ə.ɡəs/", "customer":"/ˈkʌs.tə.mə/", "abacus":"/ˈæb.ə.kəs/", "consider":"/kənˈsɪd.ə/", "vanilla":"/vəˈnɪl.ə/", "photographer":"/fəˈtɒɡ.rə.fə/", "instrument":"/ˈɪn.strə.mənt/", "propeller":"/prəˈpel.ə/", "predator":"/ˈpred.ə.tə/", "savannah":"/səˈvæn.ə/", "charisma":"/kəˈrɪz.mə/", "surrender":"/səˈren.də/", "conundrum":"/kəˈnʌn.drəm/", "gorilla":"/ɡəˈrɪl.ə/", "hazardous":"/ˈhæz.ə.dəs/", "prospectus":"/prəˈspek.təs/", "adamant":"/ˈæd.ə.mənt/", "astronomer":"/əˈstrɒn.ə.mə/", "adaptor":"/əˈdæp.tə/", "comic":"/ˈkɒm.ɪk/", "invest":"/ɪnˈvest/", "rabbit":"/ˈræb.ɪt/", "women":"/ˈwɪm.ɪn/", "solid":"/ˈsɒl.ɪd/", "rapid":"/ˈræp.ɪd/", "visit":"/ˈvɪz.ɪt/", "epic":"/ˈep.ɪk/", "biscuit":"/ˈbɪs.kɪt/", "locket":"/ˈlɒk.ɪt/", "imposter":"/ɪmˈpɒs.tə/", "bucket":"/ˈbʌk.ɪt/", "limit":"/ˈlɪm.ɪt/", "cricket":"/ˈkrɪk.ɪt/", "minute":"/ˈmɪn.ɪt/", "attic":"/ˈæt.ɪk/", "robin":"/ˈrɒb.ɪn/", "coffin":"/ˈkɒf.ɪn/", "rustic":"/ˈrʌs.tɪk/", "puppet":"/ˈpʌp.ɪt/", "captive":"/ˈkæp.tɪv/", "intent":"/ɪnˈtent/", "ticket":"/ˈtɪk.ɪt/", "classic":"/ˈklæs.ɪk/", "profit":"/ˈpɒf.ɪt/", "resin":"/ˈrez.ɪn/", "haggis":"/ˈhæɡ.ɪs/", "bandit":"/ˈbæn.dɪt/", "tonic":"/ˈtɒn.ɪk/", "Latin":"/ˈlæt.ɪn/", "instructor":"/ɪnˈstrʌk.tə/", "pocket":"/ˈpɒk.ɪt/", "promise":"/ˈprɒm.ɪs/", "plastic":"/ˈplæs.tɪk/", "comet":"/ˈkɒm.ɪt/", "relic":"/ˈrel.ɪk/", "lyric":"/ˈlɪr.ɪk/", "goblin":"/ˈɡɒb.lɪn/", "statistic":"/stəˈtɪs.tɪk/", "habit":"/ˈhæb.ɪt/", "public":"/ˈpʌb.lɪk/", "passive":"/ˈpæs.ɪv/", "cabin":"/ˈkæb.ɪn/", "laxative":"/ˈlæk.sə.tɪv/", "picnic":"/ˈpɪk.nɪk/", "rocket":"/ˈrɒk.ɪt/", "gossip":"/ˈɡɒs.ɪp/", "narrative":"/ˈnær.ə.tɪv/", "olive":"/ˈɒl.ɪv/", "victim":"/ˈvɪk.tɪm/", "select":"/səˈlekt/", "lettuce":"/ˈlet.ɪs/", "necklace":"/ˈnek.ləs/", "bullet":"/ˈbʊl.ɪt/", "kebab":"/kəˈbæb/", "palace":"/ˈpæl.əs/", "anonymous":"/əˈnɒn.ɪ.məs/", "politics":"/ˈpɒl.ə.tɪks/", "honest":"/ˈɒn.ɪst/", "helmet":"/ˈhel.mɪt/", "character":"/ˈkær.ək.tə/", "foreign":"/ˈfɒr.ən/", "menace":"/ˈmen.əs/", "magnet":"/ˈmæɡ.nət/", "mechanic":"/məˈkæn.ɪk/", "tablet":"/ˈtæb.lət/", "rivet":"/ˈrɪv.ɪt/", "facet":"/ˈfæs.ɪt/", "wallet":"/ˈwɒl.ɪt/", "minimum":"/ˈmɪn.ɪ.məm/", "solicitor":"/səˈlɪs.ɪ.tə/", "forest":"/ˈfɒr.ɪst/", "tremendous":"/trɪˈmen.dəs/", "eldest":"/ˈel.dɪst/", "mallet":"/ˈmæl.ɪt/", "spirit":"/ˈspɪr.ɪt/", "bannister":"/ˈbæn.ɪ.stə/", "cement":"/səˈment/", "maximum":"/ˈmæk.sɪ.məm/", "pallet":"/ˈpæl.ɪt/", "specific":"/spəˈsɪf.ɪk/", "solace":"/ˈsɒl.əs/", "captain":"/ˈkæp.tɪn/", "minister":"/ˈmɪn.ɪ.stə/", "terrace":"/ˈter.əs/", "pessimist":"/ˈpes.ɪ.mɪst/", "element":"/ˈel.ə.mənt/", "obstinate":"/ˈɒb.stɪ.nət/", "philosopher":"/fəˈlɒs.ə.fə/", "apprentice":"/əˈpren.tɪs/", "heretic":"/ˈher.ə.tɪk/", "neglect":"/nɪˈɡlekt/", "custom":"/ˈkʌs.təm/", "matter":"/ˈmæt.ə/", "assessment":"/əˈses.mənt/", "office":"/ˈɒf.ɪs/", "closet":"/ˈklɒz.ɪt/", "primitive":"/ˈprɪm.ɪ.tɪv/", "carrot":"/ˈkær.ət/", "puffin":"/ˈpʌf.ɪn/", "mantra":"/ˈmæn.trə/", "pumpkin":"/ˈpʌm.pkɪn/", "plunder":"/ˈplʌn.də/", "phantom":"/ˈfæn.təm/", "offender":"/əˈfen.də/", "planet":"/ˈplæn.ɪt/", "calendar":"/ˈkæl.ən.də/", "moral":"/ˈmɒr.əl/", "dollop":"/ˈdɒl.əp/", "napkins":"/ˈnæp.kɪnz/", "summer":"/ˈsʌm.ə/", "dolphin":"/ˈdɒl.fɪn/", "cylinder":"/ˈsɪl.ɪn.də/", "packet":"/ˈpæk.ɪt/", "veranda":"/vəˈræn.də/", "wagon":"/ˈwæɡ.ən/", "socket":"/ˈsɒk.ɪt/", "occurrence":"/əˈkʌr.əns/", "paddock":"/ˈpæd.ək/", "crevice":"/ˈkrev.ɪs/", "discipline":"/ˈdɪs.ə.plɪn/", "buzzard":"/ˈbʌz.əd/", "balance":"/ˈbæl.əns/", "patella":"/pəˈtel.ə/", "pasta":"/ˈpæs.tə/", "ultimate":"/ˈʌl.tɪ.mət/", "sinister":"/ˈsɪn.ɪ.stə/", "involvement":"/ɪnˈvɒlv.mənt/", "hammer":"/ˈhæm.ə/", "suspend":"/səˈspend/", "summon":"/ˈsʌm.ən/", "positive":"/ˈpɒz.ə.tɪv/", "exodus":"/ˈek.sə.dəs/", "common":"/ˈkɒm.ən/", "sister":"/ˈsɪs.tə/", "topic":"/ˈtɒp.ɪk/", "mustard":"/ˈmʌs.təd/", "corrupt":"/kəˈrʌpt/", "compass":"/ˈkʌm.pəs/", "member":"/ˈmem.bə/", "novice":"/ˈnɒv.ɪs/", "negative":"/ˈneɡ.ə.tɪv/", "hospice":"/ˈhɒs.pɪs/", "succumb":"/səˈkʌm/", "testament":"/ˈtes.tə.mənt/", "tandem":"/ˈtæn.dəm/", "configure":"/kənˈfɪɡ.ə/", "lobster":"/ˈlɒb.stə/", "talent":"/ˈtæl.ənt/", "attend":"/əˈtend/", "canvas":"/ˈkæn.vəs/", "massacre":"/ˈmæs.ə.kə/", "offend":"/əˈfend/", "pivot":"/ˈpɪv.ət/", "cooker":"/ˈkʊk.ə/", "hazard":"/ˈhæz.əd/", "splendour":"/ˈsplen.də/", "pelvis":"/ˈpel.vɪs/", "dollar":"/ˈdɒl.ə/", "tractor":"/ˈtræk.tə/", "woman":"/ˈwʊm.ən/", "across":"/əˈkrɒs/", "borough":"/ˈbʌr.ə/", "summit":"/ˈsʌm.ɪt/", "placenta":"/pləˈsen.tə/", "problem":"/ˈprɒb.ləm/", "absolve":"/əbˈzɒlv/", "horror":"/ˈhɒr.ə/", "ballot":"/ˈbæl.ət/", "dogma":"/ˈdɒɡ.mə/", "analysis":"/əˈnæl.ə.sɪs/", "syllabus":"/ˈsɪl.ə.bəs/", "obstruct":"/əbˈstrʌkt/", "clever":"/ˈklev.ə/", "suppress":"/səˈpres/", "pilgrim":"/ˈpɪl.ɡrɪm/", "optimist":"/ˈɒp.tɪ.mɪst/", "citrus":"/ˈsɪt.rəs/", "commit":"/kəˈmɪt/"
};

const CHAPTERS = [
    {
        title: "Short Vowels",
        sections: [
            { name: "The kit /ɪ/ vowel", instr: "Transcribe words with the kit /ɪ/ vowel.", words: "big, still, list, film, win, trip, pick, six, give, quick, kid, skin, hill, miss, hit, bit, risk, tip, bill, mix, sick, split, twin, fit, sit, hip, tin, kill, stick, lift" },
            { name: "The trap /æ/ vowel", instr: "Transcribe words with the trap /æ/ vowel.", words: "man, back, tax, plan, mass, track, tag, add, van, fact, brand, fat, stand, act, vat, pack, tab, black, rant, snack, fan, wrap, gas, lab, ban, lack, cat, flat, hand, snap" },
            { name: "The kit /ɪ/, trap /æ/ revision", instr: "Transcribe words with /ɪ/ or /æ/.", words: "tap, mat, trim, strand, tick, rack, lip, drag, pin, rim, lap, grin, lad, wig, scrap, grill, bat, wit, span, lid, valve, stiff, skim, wax, wrist, grip, trap, pill, knit, tram" },
            { name: "The dress /e/ vowel", instr: "Transcribe words with the dress /e/ vowel.", words: "best, next, web, help, set, well, press, red, let, end, bread, rent, text, pet, head, den, rest, friend, step, dress, bed, bell, neck, desk, spread, pen, wet, mess, hell, ten" },
            { name: "Kit, Trap, Dress Revision", instr: "Transcribe with /ɪ/, /æ/ or /e/.", words: "nest, wag, vet, lick, bent, limb, melt, flint, axe, pest, drift, rag, drip, pram, sift, vent, fig, tract, skid, tread, din, nip, sap, deck, gift, dam, frisk, crest, glint, ramp, kilt, plaid, lilt, nick, glen, kit, damp, lag, sniff, crab" },
            { name: "The lot /ɒ/ vowel", instr: "Transcribe with the lot /ɒ/ vowel.", words: "top, want, stop, log, stock, cost, rock, hot, golf, box, loss, bomb, spot, god, boss, block, crop, plot, dog, swan, rob, squad, bond, fox, cross, drop, lock, pot, what" },
            { name: "Kit, Trap, Dress, Lot Revision", instr: "Transcribe with /ɪ/, /æ/, /e/ or /ɒ/.", words: "quill, keg, sag, twig, silt, flock, crib, pact, sect, cleanse, smack, mop, knock, limp, fad, whim, mend, fizz, amp, bib, wand, squint, slack, scalp, fog, wren, cod, bless, bid, clamp, guild, zap, splint, frill, elm, dock, wasp, cog, whisk, bend" },
            { name: "The strut /ʌ/ vowel", instr: "Transcribe with the strut /ʌ/ vowel.", words: "up, run, love, son, plus, front, club, trust, rough, stuff, hub, drug, pub, cut, hull, tough, cup, hunt, plug, blood, bus, bump, fund, truck, bulk, gun, ton, sum, tub, puff" },
            { name: "Five Vowel Revision", instr: "Transcribe with /ɪ/, /æ/, /e/, /ɒ/ or /ʌ/.", words: "dull, hum, quack, crypt, lust, gloss, tusk, swamp, squat, scrub, scuff, snag, none, swill, cuff, glove, cot, cyst, muck, swat, bulb, whack, tug, fob, bud, stomp, buck, dread, blimp, trot, wok, wad, beg, hob" },
            { name: "The foot /ʊ/ vowel", instr: "Transcribe with the foot /ʊ/ vowel.", words: "look, put, good, book, full, woof, hook, nook, wood, pull, took, wolf, stood, cook, foot, crook, hood, rook, brook, bull, wool" },
            { name: "Short Vowels Comprehensive", instr: "Comprehensive short vowels revision.", words: "quit, ram, wolf, egg, trick, buzz, scant, swap, cliff, flood, quest, skull, guess, squid, helm, rub, scab, smog, peg, snug, quilt, crack, knot, bull, kick, strut, floss, scrum, book, sweat, cough, slam, duck, sieve, blob, twist, gulf, spell, doll, foot, clump, plait, scan, fix, twelve, blonde, hymn, drum, hook, knack, sculpt, whelk, bronze, frizz, gut, gram, quell, frost, swab, hem, stud, breast, smock, build, pat, milk, realm, blitz, pull, sulk, sob, ant, fib, crumb, stress, sock, spill, smell, pulse, frock, flex, clan, lapse, frog, mud, swim, hump, scamp, clock, wool, pond, cull, lamb, mock, zip, swift, stamp, pant, mob, kiss, weld, quip, script, dud, stood, sand, silk, slop, slab, sprint, plump, crust, whip, bog, disc, rot, mill, gland" }
        ]
    },
    {
        title: "Schwa & Unstressed",
        sections: [
            { name: "Schwa /ə/", instr: "Transcribe with /ə/. Use stress marks (ˈ).", words: "gallon, above, panda, villain, collapse, syrup, lemon, protect, extra, canal, arrest, tenant, parrot, alpha, campus, welcome, lapel, cactus, collect, bullock, stomach, buttock, correct, woollen, villa, husband, assess, heron, breakfast, atlas, Christmas, maggot, atom, cadet, felon, zebra, possess, melon, hammock, adopt, comma, gazette, gammon, dragon, column, salad, gallop, stigma, ballad, attract" },
            { name: "Schwa /ə/ with <r>", instr: "Transcribe words with <r> in spelling. Use (ˈ).", words: "doctor, lizard, terror, copper, butter, monarch, forgive, cover, hover, blizzard, figure, liquor, ponder, forget, rigour, grammar, actor, suffer, concert, offer, persist, whisper, sponsor, vulgar, sulphur, otter, centre, honour, enter, standard, plumber, collar, leopard, mirror, glamour, custard, timber, cupboard, effort, differ" },
            { name: "Polysyllabic Schwa /ə/", instr: "Transcribe polysyllabic words with (ˈ).", words: "wilderness, professor, asparagus, customer, abacus, consider, vanilla, photographer, instrument, propeller, predator, savannah, charisma, surrender, conundrum, gorilla, hazardous, prospectus, adamant, astronomer, adaptor" },
            { name: "Unstressed kit /ɪ/", instr: "Transcribe with unstressed kit /ɪ/.", words: "comic, invest, rabbit, women, solid, rapid, visit, epic, biscuit, locket, imposter, bucket, limit, cricket, minute, attic, robin, coffin, rustic, puppet, captive, intent, ticket, classic, profit, resin, haggis, bandit, tonic, Latin, instructor, pocket, promise, plastic, comet, relic, lyric, goblin, statistic, habit, public, passive, cabin, laxative, picnic, rocket, gossip, narrative, olive" },
            { name: "Schwa /ə/ vs kit /ɪ/", instr: "Transcribe /ə/ or /ɪ/ based on your speech.", words: "victim, select, lettuce, necklace, bullet, kebab, palace, anonymous, politics, honest, helmet, character, foreign, menace, magnet, mechanic, tablet, rivet, facet, wallet, minimum, solicitor, forest, tremendous, eldest, mallet, spirit, bannister, cement, maximum, pallet, specific, solace, captain, minister, terrace, pessimist, element, obstinate, philosopher, apprentice, heretic, neglect" },
            { name: "Final Revision", instr: "Mixed unstressed syllable revision.", words: "custom, matter, assessment, office, closet, primitive, carrot, puffin, mantra, pumpkin, plunder, phantom, offender, planet, calendar, moral, dollop, napkins, summer, dolphin, cylinder, packet, veranda, wagon, socket, occurrence, paddock, crevice, discipline, buzzard, balance, patella, pasta, ultimate, sinister, involvement, hammer, suspend, summon, positive, exodus, common, sister, topic, mustard, corrupt, compass, member, novice, negative, hospice, succumb, testament, tandem, configure, lobster, talent, attend, canvas, massacre, offend, pivot, cooker, hazard, splendour, pelvis, dollar, tractor, woman, across, borough, summit, placenta, problem, absolve, horror, ballot, dogma, analysis, syllabus, obstruct, clever, suppress, pilgrim, optimist, citrus, commit" }
        ]
    }
];

let state = { view: 'menu', chapterIdx: 0, sectionIdx: 0, wordIdx: 0, words: [] };
let feedbackTimer;

function init() {
    renderChapters();
    document.addEventListener('keydown', handleKeys);
}

function handleKeys(e) {
    if (state.view === 'menu') {
        const n = parseInt(e.key);
        if (n > 0 && n <= CHAPTERS.length) selectChapter(n - 1);
    } else if (state.view === 'section-menu') {
        if (e.key === 'Escape') showView('menu');
        const code = e.key.toUpperCase();
        const keys = "123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const idx = keys.indexOf(code);
        if (idx !== -1 && idx < CHAPTERS[state.chapterIdx].sections.length) selectSection(idx);
    } else if (state.view === 'exercise') {
        if (e.key === 'Escape') showView('section-menu');
        if (e.key === 'Enter') checkAnswer();
    }
}

function showView(viewName) {
    state.view = viewName;
    document.querySelectorAll('.view').forEach(v => v.classList.add('hidden'));
    
    const target = document.getElementById(viewName + '-view');
    if (target) target.classList.remove('hidden');

    if (viewName === 'exercise') {
        const inp = document.getElementById('ipa-input');
        if (inp) {
            inp.value = '';
            inp.focus();
        }
    }
}

function renderChapters() {
    const list = document.getElementById('chapter-list');
    list.innerHTML = '';
    CHAPTERS.forEach((ch, i) => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `<span>${ch.title}</span><span class="item-key">[${i+1}]</span>`;
        div.onclick = () => selectChapter(i);
        list.appendChild(div);
    });
}

function selectChapter(idx) {
    state.chapterIdx = idx;
    const ch = CHAPTERS[idx];
    document.getElementById('active-chapter-title').textContent = ch.title.toUpperCase();
    const list = document.getElementById('section-list');
    list.innerHTML = '';
    const keys = "123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    ch.sections.forEach((sec, i) => {
        const div = document.createElement('div');
        div.className = 'item';
        div.innerHTML = `<span>${sec.name}</span><span class="item-key">[${keys[i]}]</span>`;
        div.onclick = () => selectSection(i);
        list.appendChild(div);
    });
    showView('section-menu');
}

function selectSection(idx) {
    state.sectionIdx = idx;
    const sec = CHAPTERS[state.chapterIdx].sections[idx];
    state.words = sec.words.split(', ').map(w => w.trim());
    state.wordIdx = 0;
    
    document.getElementById('chapter-label').textContent = CHAPTERS[state.chapterIdx].title;
    document.getElementById('section-label').textContent = sec.name;
    document.getElementById('instruction-text').textContent = sec.instr;
    
    showView('exercise');
    renderWord();
}

function renderWord() {
    const word = state.words[state.wordIdx];
    document.getElementById('word-display').textContent = word;
    document.getElementById('ipa-input').value = '';
    document.getElementById('feedback').textContent = '';
    updateProgress();
}

function updateProgress() {
    const current = state.wordIdx + 1;
    const total = state.words.length;
    document.getElementById('counter').textContent = `${current} / ${total}`;
    document.getElementById('progress-fill').style.width = `${(current / total) * 100}%`;
}

function checkAnswer() {
    const fb = document.getElementById('feedback');
    const input = document.getElementById('ipa-input').value.trim();
    const word = state.words[state.wordIdx];
    const correct = MASTER_IPA[word] || "N/A";
    const cleanInput = input.startsWith('/') ? input : `/${input}/`;

    if (cleanInput === correct) {
        fb.textContent = 'CORRECT';
        fb.style.color = 'var(--success)';
        
        clearTimeout(feedbackTimer);
        feedbackTimer = setTimeout(() => {
            state.wordIdx++;
            if (state.wordIdx < state.words.length) {
                renderWord();
            } else {
                showView('section-menu');
            }
        }, 600);
    } else {
        fb.textContent = `EXPECTED: ${correct}`;
        fb.style.color = 'var(--error)';
    }
}

document.getElementById('exit-btn').onclick = () => showView('section-menu');
init();
